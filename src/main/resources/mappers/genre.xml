<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="genre">
	<sql id="rank">
		<if test="option == 1">
			LEFT OUTER JOIN novel n ON n.genre=g.code
			GROUP BY g.code, g.contents
			ORDER BY SUM(n.recom) DESC
		</if>
	</sql>
	<select id="list" resultType="Genre">
		SELECT *
		FROM genre g
		<include refid="rank"></include>
		LIMIT #{offset}, #{amount}
	</select>
</mapper>